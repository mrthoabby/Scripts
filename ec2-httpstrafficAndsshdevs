gcloud compute instances create beta-apps --project=project-77ee1679-6881-4e87-9f4 --zone=us-central1-a --machine-type=e2-medium --network-interface=network-tier=PREMIUM,private-network-ip=10.128.1.1,stack-type=IPV4_ONLY,subnet=default --metadata=startup-script=\#\!/usr/bin/env\ bash$'\n'set\ -e$'\n'$'\n'echo\ \"===\ INIT\ DEBIAN\ MINIMAL\ ===\"$'\n'$'\n'\#\ Comprobar\ root$'\n'if\ \[\ \"\$\(id\ -u\)\"\ -ne\ 0\ \]\;\ then$'\n'\ \ echo\ \"Ejecuta\ este\ script\ como\ root\"$'\n'\ \ exit\ 1$'\n'fi$'\n'$'\n'export\ DEBIAN_FRONTEND=noninteractive$'\n'$'\n'\#\ 1\️\⃣\ Actualizar\ sistema$'\n'echo\ \"\>\>\ Actualizando\ sistema\"$'\n'apt\ update\ -y$'\n'apt\ full-upgrade\ -y$'\n'apt\ autoremove\ -y$'\n'apt\ autoclean\ -y$'\n'$'\n'\#\ 2\️\⃣\ Desactivar\ login\ por\ contrase\ña\ \(SSH\)$'\n'echo\ \"\>\>\ Configurando\ SSH\ \(solo\ llaves\)\"$'\n'sed\ -i\ \'s/^\#\\\?PasswordAuthentication\ .\*/PasswordAuthentication\ no/\'\ /etc/ssh/sshd_config$'\n'systemctl\ restart\ ssh$'\n'$'\n'\#\ 3\️\⃣\ Instalar\ Docker\ oficial$'\n'echo\ \"\>\>\ Instalando\ Docker\"$'\n'apt\ install\ -y\ ca-certificates\ curl\ gnupg$'\n'curl\ -fsSL\ https://get.docker.com\ \|\ sh$'\n'$'\n'systemctl\ enable\ docker$'\n'systemctl\ start\ docker$'\n'$'\n'\#\ 4\️\⃣\ Instalar\ Nginx$'\n'echo\ \"\>\>\ Instalando\ Nginx\"$'\n'apt\ install\ -y\ nginx$'\n'systemctl\ enable\ nginx$'\n'systemctl\ start\ nginx$'\n'$'\n'echo\ \"===\ LISTO\ \✔\ ===\"$'\n'docker\ --version$'\n'nginx\ -v$'\n',ssh-keys=deanis89:ssh-ed25519\ AAAAC3NzaC1lZDI1NTE5AAAAIDAAv5zxVobRaCpXDjXOix5v4IrFOLXxqZTqmkjvqTCQ\ deanis89@hotmail.com --maintenance-policy=MIGRATE --provisioning-model=STANDARD --service-account=165310053092-compute@developer.gserviceaccount.com --scopes=https://www.googleapis.com/auth/devstorage.read_only,https://www.googleapis.com/auth/logging.write,https://www.googleapis.com/auth/monitoring.write,https://www.googleapis.com/auth/service.management.readonly,https://www.googleapis.com/auth/servicecontrol,https://www.googleapis.com/auth/trace.append --tags=https-traffic,shh-devs --create-disk=auto-delete=yes,boot=yes,device-name=beta-apps,image=projects/debian-cloud/global/images/debian-12-bookworm-v20251209,mode=rw,size=10,type=pd-balanced --shielded-secure-boot --shielded-vtpm --shielded-integrity-monitoring --labels=goog-ec-src=vm_add-gcloud --reservation-affinity=any
